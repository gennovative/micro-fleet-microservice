{"version":3,"sources":["app/adapters/MessageBrokerAdapter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,+DAA0D;AAC1D,mFAA4G;AAG5G,0DAA4D;AAC5D,8CAAgD;AAIhD,IAAa,oBAAoB,GAAjC;IAEC,YACoC,eAAuC,EAC/B,aAAsC;QAD9C,oBAAe,GAAf,eAAe,CAAwB;QAC/B,kBAAa,GAAb,aAAa,CAAyB;IAElF,CAAC;IAEM,IAAI;QACV,IAAI,MAAM,GAAG,IAAI,CAAC,eAAe,EAChC,IAAI,GAAuB;YAC1B,WAAW,EAAE,MAAM,CAAC,GAAG,CAAC,yBAAC,CAAC,eAAe,CAAC;YAC1C,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,yBAAC,CAAC,mBAAmB,CAAC;YAC3C,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,yBAAC,CAAC,mBAAmB,CAAC;YAC3C,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,yBAAC,CAAC,mBAAmB,CAAC;YAC3C,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,yBAAC,CAAC,gBAAgB,CAAC;SACrC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAEM,OAAO;QACb,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;IACxC,CAAC;CACD,CAAA;AAvBY,oBAAoB;IADhC,iCAAU,EAAE;IAIV,WAAA,6BAAM,CAAC,aAAC,CAAC,eAAe,CAAC,CAAA;IACzB,WAAA,6BAAM,CAAC,sCAAI,CAAC,oBAAoB,CAAC,CAAA;;GAJvB,oBAAoB,CAuBhC;AAvBY,oDAAoB","file":"MessageBrokerAdapter.js","sourcesContent":["import { injectable, inject } from 'back-lib-common-util';\r\nimport { IMessageBrokerConnector, IConnectionOptions, Types as ComT } from 'back-lib-service-communication';\r\n\r\nimport { IConfigurationProvider } from './ConfigurationProvider';\r\nimport { SettingKeys as S } from '../constants/SettingKeys';\r\nimport { Types as T } from '../constants/Types';\r\n\r\n\r\n@injectable()\r\nexport class MessageBrokerAdapter implements IAdapter {\r\n\r\n\tconstructor(\r\n\t\t@inject(T.CONFIG_PROVIDER) private _configProvider: IConfigurationProvider,\r\n\t\t@inject(ComT.MSG_BROKER_CONNECTOR) private _msgBrokerCnn: IMessageBrokerConnector\r\n\t) {\r\n\t}\r\n\t\r\n\tpublic init(): Promise<void> {\r\n\t\tlet cfgAdt = this._configProvider,\r\n\t\t\topts: IConnectionOptions = {\r\n\t\t\t\thostAddress: cfgAdt.get(S.MSG_BROKER_HOST),\r\n\t\t\t\tusername: cfgAdt.get(S.MSG_BROKER_USERNAME),\r\n\t\t\t\tpassword: cfgAdt.get(S.MSG_BROKER_PASSWORD),\r\n\t\t\t\texchange: cfgAdt.get(S.MSG_BROKER_EXCHANGE),\r\n\t\t\t\tqueue: cfgAdt.get(S.MSG_BROKER_QUEUE)\r\n\t\t\t};\r\n\t\treturn this._msgBrokerCnn.connect(opts);\r\n\t}\r\n\r\n\tpublic dispose(): Promise<void> {\r\n\t\treturn this._msgBrokerCnn.disconnect();\r\n\t}\r\n}"]}