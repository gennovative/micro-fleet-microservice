{"version":3,"sources":["app/addons/TrailsServerAddOn.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,oCAAqC;AACrC,+DAA8F;AAC9F,8CAAgD;AAEhD,2BAA4B;AAI5B,IAAa,iBAAiB,GAA9B;IAKC,YACmC,YAAkC;QAEpE,IAAI,CAAC,OAAO,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC;QAClC,YAAY,CAAC,YAAY,CAAC,aAAC,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACvD,CAAC;IAGD,IAAI,MAAM;QACT,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IAED;;OAEG;IACH,IAAI;QACH,MAAM,CAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;aAC9B,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IAED;;OAEG;IACH,UAAU;QACT,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,OAAO;QACN,MAAM,CAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACjC,CAAC;CACD,CAAA;AAtCY,iBAAiB;IAD7B,iCAAU,EAAE;IAOV,WAAA,6BAAM,CAAC,4BAAG,CAAC,oBAAoB,CAAC,CAAA;;GANtB,iBAAiB,CAsC7B;AAtCY,8CAAiB","file":"TrailsServerAddOn.js","sourcesContent":["import TrailsApp = require('trails');\r\nimport { injectable, inject, IDependencyContainer, Types as CmT } from 'back-lib-common-util';\r\nimport { Types as T } from '../constants/Types';\r\n\r\nimport app = require('../');\r\n\r\n\r\n@injectable()\r\nexport class TrailsServerAddOn implements IServiceAddOn {\r\n\r\n\tprivate _server: TrailsApp;\r\n\r\n\r\n\tconstructor(\r\n\t\t@inject(CmT.DEPENDENCY_CONTAINER) depContainer: IDependencyContainer\r\n\t) {\r\n\t\tthis._server = new TrailsApp(app);\r\n\t\tdepContainer.bindConstant(T.TRAILS_APP, this._server);\r\n\t}\r\n\r\n\r\n\tget server(): TrailsApp {\r\n\t\treturn this._server;\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.init\r\n\t */\r\n\tinit(): Promise<void> {\r\n\t\treturn <any>this._server.start()\r\n\t\t\t.catch(err => this._server.stop(err));\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.deadLetter\r\n\t */\r\n\tdeadLetter(): Promise<void> {\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.dispose\r\n\t */\r\n\tdispose(): Promise<void> {\r\n\t\treturn <any>this._server.stop();\r\n\t}\r\n}"]}